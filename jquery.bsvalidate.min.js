/*!
 * jQuery bsValidate Plugin v1.3.0
 * Form Validation for Twitter Bootstrap Forms (https://github.com/matthewjmink/bsValidate)
 * Copyright 2016 Matt Mink
 * Licensed under MIT (https://github.com/matthewjmink/bsValidate/blob/master/LICENSE)
 */
!function(a,b,c,d){"use strict";function e(b,c){s.alertTarget=a(b),this.element=b,this.settings=a.extend(!0,{},s,c),this._defaults=s,this._name=r,this.init()}function f(a,b){var c=!0,d=a[b].required.dependency,e=null;return d&&(d.isBlank&&(c=c&&g(a,d.isBlank)),d.isNotBlank&&(c=c&&h(a,d.isNotBlank)),d.equals&&(e=a[d.equals[0]].el,e.is(":radio")&&(e=e.filter(":checked")),c=e.val()===d.equals[1]),d.doesNotEqual&&(e=a[d.doesNotEqual[0]].el,e.is(":radio")&&(e=e.filter(":checked")),c=e.val()!==d.doesNotEqual[1])),c}function g(a,b){var c=0;"string"==typeof b&&(b=b.split(","));for(var d=0;d<b.length;d++)a[b[d]].el.isBlank()&&c++;return c===b.length}function h(a,b){var c=0;"string"==typeof b&&(b=b.split(","));for(var d=0;d<b.length;d++)a[b[d]].el.isBlank()||c++;return c===b.length}function i(a,b,c,e){return a?(b!==d&&k(c,b,e),1):(b!==d&&l(c,e),0)}function j(a,b,c,e){return a?(b!==d&&m(c,b,e),1):(b!==d&&n(c,e),0)}function k(b,c,d){if(b.find("."+d).length<1){var e=a('<span class="help-block '+d+'">'+c+"</span>");b.append(e)}}function l(a,b){var c=a.find("."+b);c.remove()}function m(b,c,d){if(b.find("."+d).length<1){var e=a('<div class="alert alert-danger '+d+'">'+c+"</div>");b.prepend(e)}}function n(a,b){var c=a.find("."+b);c.remove()}function o(b){function c(){if(l[m].hasDependency!==d&&h.settings.triggerDependentValidationOnChange){var a=l[m].hasDependency.split(",");if(a.length>1||l[a[0]].el[0]!==b.relatedTarget)for(var c=0;c<a.length;c++){var g=l[a[c]].el.isBlank(h),s=l[a[c]].el.closest(h.settings.formGroupSelector);e="help-required",g=g&&f(l,a[c]);var t=i(g,l[a[c]].required.helpText,s,e);t?s.addClass("has-error"):s.removeClass("has-error")}}if(l[m].required!==d){var u=l[m].el.isBlank(h);e="help-required",u=u&&f(l,m),o+=i(u,l[m].required.helpText,n,e)}if(l[m].email!==d&&(e="help-email",o+=i(!q(r)&&""!==r,l[m].email.helpText,n,e)),l[m].characters!==d){e="help-characters";var v=l[m].characters.max||r.length,w=l[m].characters.min||0,x=r.length>v||r.length<w;o+=i(x,l[m].characters.helpText,n,e)}if(l[m].regex!==d&&(e="help-regex",o+=i(!p(l[m].regex.pattern,r)&&!k.isBlank(h),l[m].regex.helpText,n,e)),l[m].match!==d){e="help-match";var y=j.find('[name="'+l[m].match.field+'"]').val();o+=i(y!==r&&!k.isBlank(h),l[m].match.helpText,n,e)}if(l[m].custom!==d){e="help-custom";var z=l[m].custom.fn(l[m].el);o+=i(z,l[m].custom.helpText,n,e)}o>0?n.addClass("has-error"):n.removeClass("has-error")}var e,g=b.data,h=g.bsv,j=a(h.element),k=a(b.target),l=g.fields,m=g.key,n=k.closest(h.settings.formGroupSelector),o=0,r=k.val();k.is(":radio")?setTimeout(function(){var b=!1;l[m].el.each(function(){a(this).is(":focus")&&(b=!0)}),b||c()},10):c()}function p(a,b){return b.match(a)}function q(a){var b=/[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/i;return b.test(a)}var r="bsValidate",s={requiredSelector:"input.required,textarea.required,select.required,[required]",fields:{},formGroupSelector:".form-group",attrAsKey:"name",mergeAlerts:!1,alertMessage:null,blankSelectValue:"",novalidate:!0,toggleHelpTextOnSubmit:!1,triggerDependentValidationOnChange:!0,autoScrollToAlerts:!0,before:function(){},success:function(){},fail:function(a){a.preventDefault()}};a.extend(e.prototype,{init:function(){var b=this,c=a(b.element),e=c.find(b.settings.requiredSelector),g=b.settings.fields,h=c.attr("novalidate");h===d&&b.settings.novalidate&&c.attr("novalidate",""),e.each(function(){var c=a(this).attr(b.settings.attrAsKey);if(g[c]===d||g[c].required===d){var e=a(this).closest(b.settings.formGroupSelector),f=e.find(".label,label").text();g[c]=g[c]===d?{}:g[c],g[c].el=a(this),g[c].required={alert:f+" is required."}}}),a.each(g,function(e,f){("object"!=typeof g[e].el||g[e].el.jquery===d)&&(g[e].el=c.find("["+b.settings.attrAsKey+'="'+e+'"]')),g[e].required&&g[e].required.dependency&&a.each(g[e].required.dependency,function(a,d){for(var f="equals"===a||"doesNotEqual"===a?d[0].split(","):d.split(","),h=0;h<f.length;h++)g[f[h]]||(g[f[h]]={el:c.find("["+b.settings.attrAsKey+'="'+f[h]+'"]')},g[f[h]].el.on("blur",{bsv:b,fields:g,key:f[h],value:g[f[h]]},o)),g[f[h]].hasDependency?g[f[h]].hasDependency+=","+e:g[f[h]].hasDependency=e}),g[e].el.length>0?g[e].el.on("blur",{bsv:b,fields:g,key:e,value:f},o):delete g[e]}),c.submit(function(e){b.settings.before();var h=!0,k=b.settings.mergeAlerts?b.settings.alertMessage:"",l=!1;null===k&&(k="<ul>",l=!0),a.each(g,function(a,e){var m,n,o=g[a].el.closest(b.settings.formGroupSelector),r=0,s=g[a].el.val(),t=a.replace(/[^a-zA-Z\d-]/g,"-");if(g[a].el.is(":visible")){if(g[a].required!==d){n="required",m="alert-"+t+"-"+n;var u=g[a].el.isBlank(b);u=u&&f(g,a),r+=b.settings.mergeAlerts?0|u:j(u,g[a][n].alert,b.settings.alertTarget,m),k+=l&&u?"<li>"+g[a][n].alert+"</li>":"",b.settings.toggleHelpTextOnSubmit&&i(u,g[a][n].helpText,o,"help-"+n)}if(g[a].email!==d){n="email",m="alert-"+t+"-"+n;var v=!q(s)&&!g[a].el.isBlank(b);r+=b.settings.mergeAlerts?0|v:j(v,g[a].email.alert,b.settings.alertTarget,m),k+=l&&v?"<li>"+g[a].email.alert+"</li>":"",b.settings.toggleHelpTextOnSubmit&&i(v,g[a][n].helpText,o,"help-"+n)}if(g[a].characters!==d){n="characters",m="alert-"+t+"-"+n;var w=g[a][n].max||s.length,x=g[a][n].min||0,y=s.length>w||s.length<x;r+=b.settings.mergeAlerts?0|y:j(y,g[a][n].alert,b.settings.alertTarget,m),k+=l&&y?"<li>"+g[a][n].alert+"</li>":"",b.settings.toggleHelpTextOnSubmit&&i(y,g[a][n].helpText,o,"help-"+n)}if(g[a].regex!==d){n="regex",m="alert-"+t+"-"+n;var z=!p(g[a][n].pattern,s)&&!g[a].el.isBlank(b);r+=b.settings.mergeAlerts?0|z:j(z,g[a][n].alert,b.settings.alertTarget,m),k+=l&&z?"<li>"+g[a][n].alert+"</li>":"",b.settings.toggleHelpTextOnSubmit&&i(z,g[a][n].helpText,o,"help-"+n)}if(g[a].match!==d){n="match",m="alert-"+t+"-"+n;var A=c.find('[name="'+g[a][n].field+'"]').val(),B=A!==s&&!g[a].el.isBlank(b);r+=b.settings.mergeAlerts?0|B:j(B,g[a][n].alert,b.settings.alertTarget,m),k+=l&&B?"<li>"+g[a][n].alert+"</li>":"",b.settings.toggleHelpTextOnSubmit&&i(B,g[a][n].helpText,o,"help-"+n)}if(g[a].custom!==d){n="custom",m="alert-"+t+"-"+n;var C=g[a][n].fn(g[a].el);r+=b.settings.mergeAlerts?0|C:j(C,g[a][n].alert,b.settings.alertTarget,m),k+=l&&C?"<li>"+g[a][n].alert+"</li>":"",b.settings.toggleHelpTextOnSubmit&&i(C,g[a][n].helpText,o,"help-"+n)}}r>0?(o.addClass("has-error"),h=!1):o.removeClass("has-error")}),j(!h&&b.settings.mergeAlerts,k,b.settings.alertTarget,"bsv-alert"),h?b.settings.success(e):(b.settings.autoScrollToAlerts&&a("html, body").animate({scrollTop:b.settings.alertTarget.offset().top},500),b.settings.fail(e))})},destroy:function(b){var c=this,e=c.settings.fields;c.settings.fields={},a.each(e,function(a,b){"object"==typeof b.el&&b.el.jquery!==d&&b.el.off("change blur",o)}),a(c.element).off("submit").removeData(),b&&b()}}),a.fn[r]=function(b){return this.each(function(){var c=a.data(this,"plugin_"+r);c?"destroy"===b&&c.destroy():a.data(this,"plugin_"+r,new e(this,b))})},a.fn.isBlank=function(a){var b=this.val();return this.is(":checkbox,:radio")?!this.is(":checked"):""===b||null===b||b.length<1||"select"===this[0].nodeName.toLowerCase()&&b==a.settings.blankSelectValue},a.fn.destroy=function(){return this.each(function(){var b=a.data(this,"plugin_"+r);b&&b.destroy()})}}(jQuery,window,document);